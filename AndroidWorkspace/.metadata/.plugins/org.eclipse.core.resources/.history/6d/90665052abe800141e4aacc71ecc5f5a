package com.zaptech.studinfopro;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHelper extends SQLiteOpenHelper {

	public static final String DB_NAME = "stdclgData.db";
	public static final int DB_VERSION = 1;

	public static final String TB_STUDENT = "tbStudent";
	public static final String TB_COLLEGE = "tbCollege";

	public static final String COL_STUDID = "StudentId";
	public static final String COL_STUDNAME = "StudentName";
	public static final String COL_STUDRNO = "StudentRno";

	public static final String COL_CLGID = "CollegeId";
	public static final String COL_CLGNAME = "CollegeName";
	public static final String COL_ClGUNIVERSITY = "CollegeUniversity";

	SQLiteDatabase sDB;
	ContentValues values;

	public DBHelper(Context context) {
		super(context, DB_NAME, null, 1);
		this.getWritableDatabase();
		// context.deleteDatabase("stdclg.db");

	}

	@Override
	public void onCreate(SQLiteDatabase db) {
		String CREATE_TB_CLG = "CREATE TABLE " + TB_COLLEGE + "(" + COL_CLGID
				+ " INTEGER PRIMARY KEY," + COL_CLGNAME + " VARCHAR,"
				+ COL_ClGUNIVERSITY + " varchar)";

		String CREATE_TB_SUTD = "CREATE TABLE " + TB_STUDENT + "(" + COL_STUDID
				+ " INTEGER PRIMARY KEY," + COL_STUDNAME + " VARCHAR,"
				+ COL_STUDRNO + " INTEGER," + COL_CLGID + " REFERENCES "
				+ TB_COLLEGE + "(" + COL_CLGID + "))";

		db.execSQL(CREATE_TB_CLG);
		db.execSQL(CREATE_TB_SUTD);
	}

	@Override
	public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

	}

	public SQLiteDatabase getDB() {
		sDB = getWritableDatabase();
		return sDB;
	}

	public void insertCollegeData(int clgId, String clgName,
			String clgUniversity) {
		sDB = getDB();
		values = new ContentValues();
		values.put(COL_CLGID, clgId);
		values.put(COL_CLGNAME, clgName);
		values.put(COL_ClGUNIVERSITY, clgUniversity);
		sDB.insert(TB_COLLEGE, null, values);
	}

	public void updateCollegeData(int clgId, String clgName,
			String clgUniversity) {
		sDB = getWritableDatabase();
		values = new ContentValues();
		values.put(COL_CLGNAME, clgName);
		values.put(COL_ClGUNIVERSITY, clgUniversity);
		sDB.update(TB_COLLEGE, values, "CollegeId=" + clgId, null);
	}

	public void deleteCollegeData(int clgId) {
		sDB = getDB();
		sDB.delete(TB_COLLEGE, "CollegeId=" + clgId, null);
	}

	public void deleteAllCollegeData() {
		sDB = getDB();
		sDB.delete(TB_COLLEGE, null, null);
	}

}
